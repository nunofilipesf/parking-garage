(this["webpackJsonpparking-garage"]=this["webpackJsonpparking-garage"]||[]).push([[0],{13:function(e,t,a){},14:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(5),s=a.n(c),o=(a(13),a(2)),l=function(e){var t=e.numberOfSessions,a=e.totalAmount;return n.a.createElement("div",{className:"daily-earnings-panel card-group"},n.a.createElement("div",{className:"card bg-dark text-white"},n.a.createElement("div",{className:"card-header h5 text-center"},"Today's Parking Sessions"),n.a.createElement("div",{className:"card-body"},n.a.createElement("p",{className:"display-2 text-center"},t))),n.a.createElement("div",{className:"card bg-dark text-white"},n.a.createElement("div",{className:"card-header h5 text-center"},"Today's Total Earnings"),n.a.createElement("div",{className:"card-body"},n.a.createElement("p",{className:"display-2 text-center"},"NOK ",a))))},i=function(e){var t=e.description,a=e.capacity,r=e.occupiedSpots,c=a-r,s=c/a*100;return n.a.createElement("div",{className:"floor-occupation-panel mt-3 mb-3"},n.a.createElement("h5",null,t,n.a.createElement("span",{className:"float-right font-weight-normal"},"Total spots: ",a," | Current available capacity: ",s.toFixed(1),"%")),n.a.createElement("div",{className:"progress",style:{height:"2rem"}},n.a.createElement("div",{className:"progress-bar bg-dark",role:"progressbar",style:{width:"".concat(100-s,"%")}},r," occupied"),n.a.createElement("div",{className:"progress-bar bg-info",role:"progressbar",style:{width:"".concat(s,"%")}},c," available")))},u=(a(14),function(){return n.a.createElement("div",{className:"loader"})}),m=function(e){var t=e.capacity,a=e.occupiedSpots,r=t-a,c=(r/t*100).toFixed(1);return n.a.createElement("div",{className:"occupation-totals-panel card-group"},n.a.createElement("div",{className:"card bg-dark text-white"},n.a.createElement("div",{className:"card-header h5 text-center"},"Occupied spots"),n.a.createElement("div",{className:"card-body"},n.a.createElement("p",{className:"display-2 text-center"},a))),n.a.createElement("div",{className:"card bg-dark text-white"},n.a.createElement("div",{className:"card-header h5 text-center"},"Current capacity"),n.a.createElement("div",{className:"card-body"},n.a.createElement("p",{className:"display-3 mb-0 text-center text-".concat(d(c))},c,"%"),n.a.createElement("p",{className:"text-center mb-0"},"of ",t," parking spots"))),n.a.createElement("div",{className:"card bg-dark text-white"},n.a.createElement("div",{className:"card-header h5 text-center"},"Available spots"),n.a.createElement("div",{className:"card-body"},n.a.createElement("p",{className:"display-2 text-center"},r))))};function d(e){return e<25?"danger":e<50?"warning":"success"}var p=a(3),f=a.n(p),v=a(6),b=a(7);function g(e){var t=e.spots.length,a=e.spots.filter((function(e){return e.isFree})).length;return{description:e.description,capacity:t,availableSpots:a,occupiedSpots:t-a}}function h(e,t){for(var a=0,r=0,n=0;n<e.length;n++){var c=e[n];null!=c.endDate&&(r++,a+=E(c,t))}return{numberOfSessions:r,totalAmount:a}}function E(e,t){var a,r=0,n=Math.abs(e.endDate-e.startDate)/36e5,c=Object(b.a)(t);try{for(c.s();!(a=c.n()).done;){var s=a.value;if(n<=0)break;if(null==s.numberOfHours){r+=n*s.amount;break}r+=Math.min(s.numberOfHours,n)*s.amount,n-=s.numberOfHours}}catch(o){c.e(o)}finally{c.f()}return r}var y="Compact";function N(e){var t=Math.floor(Math.random()*e.floors.length),a=Math.floor(Math.random()*e.floors[t].spots.length);if(e.floors[t].spots[a].isFree)e.floors[t].spots[a].isFree=!1,e.sessions.push({id:S().toString(),licensePlace:"AA-ABCDE-123",startDate:new Date,endDate:null});else{e.floors[t].spots[a].isFree=!0;var r=e.sessions.find((function(e){return null==e.endDate}));if(r){r.endDate=new Date(r.startDate.getTime());var n=Math.floor(8*Math.random())+1;r.endDate.setHours(r.endDate.getHours()+n)}}}function x(e,t){for(var a={id:S(),description:e,spots:[]},r=0;r<t;r++)a.spots.push({id:S(),type:y,isFree:!0});return a}function S(){return(new Date).getTime()}var O=function(){for(var e={floors:[x("1st Floor",100),x("2nd Floor",80),x("3rd Floor",80),x("4th Floor",50)],sessions:[],feeModel:[{priority:1,amount:50,numberOfHours:1},{priority:2,amount:30,numberOfHours:2},{priority:3,amount:10,numberOfHours:null}]},t=0;t<200;t++)N(e);return e}();function D(){var e=O.floors.map(g);return Promise.resolve({garage:e.reduce(k,{capacity:0,availableSpots:0,occupiedSpots:0}),floors:e,earnings:h(O.sessions,O.feeModel)})}function k(e,t){return{capacity:e.capacity+t.capacity,availableSpots:e.availableSpots+t.availableSpots,occupiedSpots:e.occupiedSpots+t.occupiedSpots}}var w="Earnings",F="Occupation";function M(){var e=Object(r.useState)(!0),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(null),l=Object(o.a)(s,2),i=l[0],m=l[1],d=Object(r.useState)(F),p=Object(o.a)(d,2),b=p[0],g=p[1];function h(e){m(e)}function E(e){return n.a.createElement("button",{type:"button",className:"btn btn-".concat(b===e?"dark":"secondary"),onClick:function(){return g(e)}},e)}return Object(r.useEffect)((function(){D().then((function(e){var t;m(e),c(!1),t=h,setInterval(Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(O),e.t0=t,e.next=4,D();case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)}))),1e3)}))}),[]),a?n.a.createElement("div",{className:"app container"},n.a.createElement(u,null)):n.a.createElement("div",{className:"app container"},n.a.createElement("div",{className:"btn-group mb-3 d-flex"},E(F),E(w)),b===F?n.a.createElement(j,{garageData:i.garage,floorsData:i.floors}):n.a.createElement(A,{earningData:i.earnings}),n.a.createElement("span",{style:{position:"fixed",bottom:"1rem",left:"1rem"}},"Photo by ",n.a.createElement("a",{href:"https://unsplash.com/@jordankgraff?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText"},"Jordan Graff")," on ",n.a.createElement("a",{href:"https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText"},"Unsplash")))}function j(e){var t=e.garageData,a=e.floorsData;return n.a.createElement(n.a.Fragment,null,n.a.createElement(m,{capacity:t.capacity||0,occupiedSpots:t.occupiedSpots||0}),a.map((function(e,t){var a=e.description,r=e.capacity,c=e.occupiedSpots;return n.a.createElement(i,{key:t,description:a,capacity:r,occupiedSpots:c})})))}function A(e){var t=e.earningData;return n.a.createElement(l,{numberOfSessions:t.numberOfSessions,totalAmount:t.totalAmount})}s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(M,null)),document.getElementById("root"))},8:function(e,t,a){e.exports=a(16)}},[[8,1,2]]]);
//# sourceMappingURL=main.2f76aabd.chunk.js.map